
CREATE TABLE Pigiatura(
    Mosto_Prodotto Number(5,2),
    Uva_Utilizzata  varchar(255),
    Data_Raccolto_Usato DATE,
    Quantita_Uva_Usata Number(4,2),
    Costo_Pignatura Number(5,2),
)

CREATE TABLE Confezione( 
    Num_Conf number(4,0) NOT NULL,
    Codice_Acquisto number(3,0) not NULL,
    Data_Acquisto date not NULL,
    Prezzo_Conf number(4,2) NOT NULL, 
    #Bott_Conf number(3,0) not NULL,

    CONSTRAINT CE_Carrello_Conf FOREIGN KEY (Codice_Acquisto) REFERENCES Carrello(Codice_Acquisto) ON DELETE CASCADE, 
    CONSTRAINT CP_Confezione PRIMARY KEY (Num_Conf)
);


CREATE TABLE Controllo_Certificazione(
    Nome_Vino varchar(255) NOT NULL, 
    Nome_Ente varchar(255) NOT NULL, 
    Num_Pratica Number(3,0) NOT NULL,
	Data_Certif DATE NOT NULL,
    Esito NUMBER(1,0) NOT NULL, 
    Certificato_Richiesto varchar(255) NOT NULL,

    CONSTRAINT CE_Tipo_Vino_CC FOREIGN KEY (Nome_Vino) REFERENCES Tipo_Vino (Nome_Vino) ON DELETE CASCADE, 
    CONSTRAINT CE_Ente_CC FOREIGN KEY (Nome_Ente) REFERENCES Ente_Certif (Nome_Ente) ON DELETE CASCADE, 
    CONSTRAINT CP_CC PRIMARY KEY (Num_Pratica) 
);

CREATE TABLE Interventi_Subiti(
    NomeV varchar(255) NOT NULL,
    ComuneV varchar(255) NOT NULL,
    Codice_FATTURA Number(3,0) not NULL,
    Tipo_Intervento varchar(255) not null,
    
    CONSTRAINT CE_Vigneto_Interventi_Subiti FOREIGN KEY (NomeV, ComuneV) REFERENCES Vigneto (NomeV, ComuneV) ON DELETE CASCADE,
    CONSTRAINT CE_Intervento_Interventi_Subiti FOREIGN KEY (Tipo_Intervento) REFERENCES Intervento (Tipo_Intervento) ON DELETE CASCADE
    
);

CREATE TABLE Trattamento_Subito(  
    NomeV varchar(255) NOT NULL,  
    ComuneV varchar(255) NOT NULL,  
    Codice_FATTURAT Number(3,0) not NULL,
    Nome_Trattamento varchar(255) not null,
      
    CONSTRAINT CE_Vigneto_Trattamento_Subito FOREIGN KEY (NomeV, ComuneV) REFERENCES Vigneto (NomeV, ComuneV) ON DELETE CASCADE,  
    CONSTRAINT CE_Trattamento_Trattamento_Subito FOREIGN KEY (Nome_Trattamento) REFERENCES Trattamento (Nome_Trattamento) ON DELETE CASCADE
      
);

CREATE TABLE Cantina(
    Nome_Cantina varchar(255) NOT NULL, 
    Via_Cantina varchar(255) NOT NULL,  
    CAP_Cantina Number(5,0) NOT NULL, 
    Citta_Cantina varchar(255) NOT NULL, 
    Nome_Sede varchar(255) NOT NULL,
    Metratura_Cantina Number(5,1) NOT NULL,
    Num_Lotto number(3,0) not null,

    CONSTRAINT CE_Lotto_Vino_Stoccaggio FOREIGN KEY (Num_Lotto) REFERENCES Lotto_Vino (Num_Lotto) ON DELETE CASCADE,
    CONSTRAINT CP_Cantina PRIMARY KEY (Nome_Cantina,Citta_Cantina,Via_Cantina)

);

CREATE TABLE Confezionamento(
    Num_Conf Number(3,0) NOT NULL,
    Num_Lotto Number(3,0) NOT NULL,
    Data_Confezionamento DATE NOT NULL,
    Num_Bottiglie_Confezionate Number(3,0) NOT NULL,
    Formato_Confezionatura varchar(255) NOT NULL,
     
    CONSTRAINT CE_Lotto_Vino_Confezionamento FOREIGN KEY (Num_Lotto) REFERENCES Lotto_Vino (Num_Lotto) ON DELETE CASCADE,
    CONSTRAINT CE_Confezione_Confezionamento FOREIGN KEY (Num_Conf) REFERENCES Confezione (Num_Conf) ON DELETE CASCADE
);